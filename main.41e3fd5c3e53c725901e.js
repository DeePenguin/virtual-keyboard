!function(){"use strict";var e={91:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},2:function(e,t,s){e.exports=s.p+"assets/images/github.svg"},832:function(e,t,s){e.exports=s.p+"assets/images/rs_school_js.svg"}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,s),a.exports}s.m=e,s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e}(),s.b=document.baseURI||self.location.href,function(){class e{constructor(e){let{parentNode:t=null,tag:s="div",className:i="",content:o="",attributes:a={}}=e;const n=document.createElement(s);n.className=i,n.innerHTML=o,Object.entries(a).forEach((e=>{let[t,s]=e;return n.setAttribute(t,s)})),t&&t.append(n),this.node=n}remove(){this.node.remove()}appendTo(e){e.append(this.node)}append(){this.node.append(...arguments)}}var t=new e({parentNode:document.body,className:"header",tag:"header",content:'<h1 class="header__title">Virtual keyboard</h1> '}),i=new e({className:"info",content:'<p class="info-text">Клавиатура создана в операционной системе Windows.</p> <p class="info-text">Комбинация для переключения языка: <em class="info-keys">Left Ctrl + Left Alt</em>.</p> '});class o extends e{constructor(e,t,s,i){super({parentNode:e,tag:"button",className:`key key_${t.code.toLowerCase()}`,attributes:{type:"button",tabindex:"-1"}}),this.config=t,this.data=this.config.key,this.symbol=this.config.symbol,this.type=this.config.type,this.shifted=this.config.shifted,this.repeat=this.config.repeat,this.actionDown=s,this.actionUp=i,this.isKeyPressed=!1,this.isClicked=!1,this.init()}init(){this.config.style&&this.node.classList.add("key_special"),this.config.icon&&(this.node.classList.add("key_icon"),this.node.append(new e({tag:"span",className:"icon material-symbols-rounded",content:this.config.icon}).node)),this.content=new e({parentNode:this.node,tag:"span",className:"key-text"}).node,this.showContent(),this.addListeners(),this.setShiftedValue()}setShiftedValue(){this.shifted||"letter"!==this.type||(this.shifted=this.data.toUpperCase())}showContent(){this.content.textContent=this.data}changeLang(e){this.config=e,this.type=e.type,this.data=e.key,this.shifted=e.shifted,this.symbol=e.symbol,this.repeat=e.repeat,this.setShiftedValue(),this.showContent()}press(){this.node.classList.add("key_pressed");const e=this.symbol??this.data;this.actionDown(e)}unpress(){this.node.classList.remove("key_pressed"),this.actionUp&&this.actionUp()}handleDown(){this.isClicked||(this.isKeyPressed=!0,this.press())}handleUp(){this.isKeyPressed&&(this.isKeyPressed=!1,this.unpress())}changeCase(){"letter"===this.type&&([this.data,this.shifted]=[this.shifted,this.data],this.showContent())}shift(){this.shifted&&([this.data,this.shifted]=[this.shifted,this.data],this.showContent())}toggle(e){this.node.classList.toggle(e)}handlePointerDown=()=>{this.isKeyPressed||(this.isClicked=!0,this.press())};handlePointerUp=()=>{this.isClicked&&(this.isClicked=!1,this.unpress())};handlePointerLeave=()=>{this.isClicked&&(this.isClicked=!1,this.unpress())};addListeners(){this.node.onpointerdown=()=>{this.isKeyPressed||(this.isClicked=!0,this.press())},this.node.onpointerup=()=>{this.isClicked&&(this.isClicked=!1,this.unpress())},this.node.onpointerleave=()=>{this.isClicked&&(this.isClicked=!1,this.unpress())}}}var a={options:{ru:{Backquote:{code:"Backquote",type:"letter",key:"ё",repeat:!0},Digit1:{code:"Digit1",type:"symbol",shifted:"!",key:"1",repeat:!0},Digit2:{code:"Digit2",type:"symbol",shifted:'"',key:"2",repeat:!0},Digit3:{code:"Digit3",type:"symbol",shifted:"№",key:"3",repeat:!0},Digit4:{code:"Digit4",type:"symbol",shifted:";",key:"4",repeat:!0},Digit5:{code:"Digit5",key:"5",type:"symbol",shifted:"%",repeat:!0},Digit6:{code:"Digit6",type:"symbol",shifted:":",key:"6",repeat:!0},Digit7:{code:"Digit7",type:"symbol",shifted:"?",key:"7",repeat:!0},Digit8:{code:"Digit8",type:"symbol",shifted:"*",key:"8",repeat:!0},Digit9:{code:"Digit9",type:"symbol",shifted:"(",key:"9",repeat:!0},Digit0:{code:"Digit0",type:"symbol",shifted:")",key:"0",repeat:!0},Minus:{code:"Minus",type:"symbol",shifted:"_",key:"-",repeat:!0},Equal:{code:"Equal",type:"symbol",shifted:"+",key:"=",repeat:!0},Backspace:{code:"Backspace",type:"functional",key:"Backspace",symbol:"",repeat:!0,style:"special",icon:"backspace"},Tab:{code:"Tab",type:"symbol",key:"Tab",symbol:"\t",repeat:!0,style:"special",icon:"keyboard_tab"},KeyQ:{code:"KeyQ",type:"letter",key:"й",repeat:!0},KeyW:{code:"KeyW",type:"letter",key:"ц",repeat:!0},KeyE:{code:"KeyE",type:"letter",key:"у",repeat:!0},KeyR:{code:"KeyR",type:"letter",key:"к",repeat:!0},KeyT:{code:"KeyT",type:"letter",key:"е",repeat:!0},KeyY:{code:"KeyY",type:"letter",key:"н",repeat:!0},KeyU:{code:"KeyU",type:"letter",key:"г",repeat:!0},KeyI:{code:"KeyI",type:"letter",key:"ш",repeat:!0},KeyO:{code:"KeyO",type:"letter",key:"щ",repeat:!0},KeyP:{code:"KeyP",type:"letter",key:"з",repeat:!0},BracketLeft:{code:"BracketLeft",type:"letter",key:"х",repeat:!0},BracketRight:{code:"BracketRight",type:"letter",key:"ъ",repeat:!0},Backslash:{code:"Backslash",type:"symbol",key:"\\",shifted:"/",repeat:!0},Delete:{code:"Delete",type:"functional",key:"Del",symbol:"",repeat:!0,style:"special"},CapsLock:{code:"CapsLock",type:"functional",key:"CapsLock",symbol:"",repeat:!1,style:"special",icon:"keyboard_capslock"},KeyA:{code:"KeyA",type:"letter",key:"ф",repeat:!0},KeyS:{code:"KeyS",type:"letter",key:"ы",repeat:!0},KeyD:{code:"KeyD",type:"letter",key:"в",repeat:!0},KeyF:{code:"KeyF",type:"letter",key:"а",repeat:!0},KeyG:{code:"KeyG",type:"letter",key:"п",repeat:!0},KeyH:{code:"KeyH",type:"letter",key:"р",repeat:!0},KeyJ:{code:"KeyJ",type:"letter",key:"о",repeat:!0},KeyK:{code:"KeyK",type:"letter",key:"л",repeat:!0},KeyL:{code:"KeyL",type:"letter",key:"д",repeat:!0},Semicolon:{code:"Semicolon",type:"letter",key:"ж",repeat:!0},Quote:{code:"Quote",type:"letter",key:"э",repeat:!0},Enter:{code:"Enter",type:"symbol",key:"Enter",symbol:"\n",repeat:!0,style:"special",icon:"keyboard_return"},ShiftLeft:{code:"ShiftLeft",type:"functional",key:"Shift",symbol:"",repeat:!1,style:"special",icon:"shift"},KeyZ:{code:"KeyZ",type:"letter",key:"я",repeat:!0},KeyX:{code:"KeyX",type:"letter",key:"ч",repeat:!0},KeyC:{code:"KeyC",type:"letter",key:"с",repeat:!0},KeyV:{code:"KeyV",type:"letter",key:"м",repeat:!0},KeyB:{code:"KeyB",type:"letter",key:"и",repeat:!0},KeyN:{code:"KeyN",type:"letter",key:"т",repeat:!0},KeyM:{code:"KeyM",type:"letter",key:"ь",repeat:!0},Comma:{code:"Comma",type:"letter",key:"б",repeat:!0},Period:{code:"Period",type:"letter",key:"ю",repeat:!0},Slash:{code:"Slash",type:"symbol",key:".",shifted:",",repeat:!0},ShiftRight:{code:"ShiftRight",type:"functional",key:"Shift",symbol:"",repeat:!1,style:"special",icon:"shift"},ArrowUp:{code:"ArrowUp",type:"functional",key:"▲",repeat:!0,style:"special"},Lang:{code:"Lang",type:"functional",key:"Lang",symbol:"",repeat:!1,style:"special",icon:"language"},ControlLeft:{code:"ControlLeft",type:"functional",key:"Ctrl",symbol:"",repeat:!1,style:"special",icon:"keyboard_control_key"},MetaLeft:{code:"MetaLeft",type:"functional",key:"Meta",symbol:"",repeat:!1,style:"special",icon:"keyboard_command_key"},AltLeft:{code:"AltLeft",type:"functional",key:"Alt",symbol:"",repeat:!1,style:"special",icon:"keyboard_option_key"},Space:{code:"Space",type:"symbol",key:" ",repeat:!0},AltRight:{code:"AltRight",type:"functional",key:"Alt",symbol:"",repeat:!1,style:"special",icon:"keyboard_option_key"},ControlRight:{code:"ControlRight",type:"functional",key:"Ctrl",symbol:"",repeat:!1,style:"special",icon:"keyboard_control_key"},ArrowLeft:{code:"ArrowLeft",type:"functional",key:"◄",repeat:!0,style:"special"},ArrowDown:{code:"ArrowDown",type:"functional",key:"▼",repeat:!0,style:"special"},ArrowRight:{code:"ArrowRight",type:"functional",key:"►",repeat:!0,style:"special"}},en:{Backquote:{code:"Backquote",type:"symbol",key:"`",shifted:"~",repeat:!0},Digit1:{code:"Digit1",type:"symbol",shifted:"!",key:"1",repeat:!0},Digit2:{code:"Digit2",type:"symbol",shifted:"@",key:"2",repeat:!0},Digit3:{code:"Digit3",type:"symbol",shifted:"#",key:"3",repeat:!0},Digit4:{code:"Digit4",type:"symbol",shifted:"$",key:"4",repeat:!0},Digit5:{code:"Digit5",key:"5",type:"symbol",shifted:"%",repeat:!0},Digit6:{code:"Digit6",type:"symbol",shifted:"^",key:"6",repeat:!0},Digit7:{code:"Digit7",type:"symbol",shifted:"&",key:"7",repeat:!0},Digit8:{code:"Digit8",type:"symbol",shifted:"*",key:"8",repeat:!0},Digit9:{code:"Digit9",type:"symbol",shifted:"(",key:"9",repeat:!0},Digit0:{code:"Digit0",type:"symbol",shifted:")",key:"0",repeat:!0},Minus:{code:"Minus",type:"symbol",shifted:"_",key:"-",repeat:!0},Equal:{code:"Equal",type:"symbol",shifted:"+",key:"=",repeat:!0},Backspace:{code:"Backspace",type:"functional",key:"Backspace",symbol:"",repeat:!0,style:"special",icon:"backspace"},Tab:{code:"Tab",type:"symbol",key:"Tab",symbol:"\t",repeat:!0,style:"special",icon:"keyboard_tab"},KeyQ:{code:"KeyQ",type:"letter",key:"q",repeat:!0},KeyW:{code:"KeyW",type:"letter",key:"w",repeat:!0},KeyE:{code:"KeyE",type:"letter",key:"e",repeat:!0},KeyR:{code:"KeyR",type:"letter",key:"r",repeat:!0},KeyT:{code:"KeyT",type:"letter",key:"t",repeat:!0},KeyY:{code:"KeyY",type:"letter",key:"y",repeat:!0},KeyU:{code:"KeyU",type:"letter",key:"u",repeat:!0},KeyI:{code:"KeyI",type:"letter",key:"i",repeat:!0},KeyO:{code:"KeyO",type:"letter",key:"o",repeat:!0},KeyP:{code:"KeyP",type:"letter",key:"p",repeat:!0},BracketLeft:{code:"BracketLeft",type:"symbol",key:"[",shifted:"{",repeat:!0},BracketRight:{code:"BracketRight",type:"symbol",key:"]",shifted:"}",repeat:!0},Backslash:{code:"Backslash",type:"symbol",key:"\\",shifted:"|",repeat:!0},Delete:{code:"Delete",type:"functional",key:"Del",symbol:"",repeat:!0,style:"special"},CapsLock:{code:"CapsLock",type:"functional",key:"CapsLock",symbol:"",repeat:!1,style:"special",icon:"keyboard_capslock"},KeyA:{code:"KeyA",type:"letter",key:"a",repeat:!0},KeyS:{code:"KeyS",type:"letter",key:"s",repeat:!0},KeyD:{code:"KeyD",type:"letter",key:"d",repeat:!0},KeyF:{code:"KeyF",type:"letter",key:"f",repeat:!0},KeyG:{code:"KeyG",type:"letter",key:"g",repeat:!0},KeyH:{code:"KeyH",type:"letter",key:"h",repeat:!0},KeyJ:{code:"KeyJ",type:"letter",key:"j",repeat:!0},KeyK:{code:"KeyK",type:"letter",key:"k",repeat:!0},KeyL:{code:"KeyL",type:"letter",key:"l",repeat:!0},Semicolon:{code:"Semicolon",type:"symbol",key:";",shifted:":",repeat:!0},Quote:{code:"Quote",type:"symbol",key:"'",shifted:'"',repeat:!0},Enter:{code:"Enter",type:"symbol",key:"Enter",symbol:"\n",repeat:!0,style:"special",icon:"keyboard_return"},ShiftLeft:{code:"ShiftLeft",type:"functional",key:"Shift",symbol:"",repeat:!1,style:"special",icon:"shift"},KeyZ:{code:"KeyZ",type:"letter",key:"z",repeat:!0},KeyX:{code:"KeyX",type:"letter",key:"x",repeat:!0},KeyC:{code:"KeyC",type:"letter",key:"c",repeat:!0},KeyV:{code:"KeyV",type:"letter",key:"v",repeat:!0},KeyB:{code:"KeyB",type:"letter",key:"b",repeat:!0},KeyN:{code:"KeyN",type:"letter",key:"n",repeat:!0},KeyM:{code:"KeyM",type:"letter",key:"m",repeat:!0},Comma:{code:"Comma",type:"symbol",key:",",shifted:"<",repeat:!0},Period:{code:"Period",type:"symbol",key:".",shifted:">",repeat:!0},Slash:{code:"Slash",type:"symbol",key:"/",shifted:"?",repeat:!0},ShiftRight:{code:"ShiftRight",type:"functional",key:"Shift",symbol:"",repeat:!1,style:"special",icon:"shift"},ArrowUp:{code:"ArrowUp",type:"functional",key:"▲",repeat:!0,style:"special"},Lang:{code:"Lang",type:"functional",key:"Lang",symbol:"",repeat:!1,style:"special",icon:"language"},ControlLeft:{code:"ControlLeft",type:"functional",key:"Ctrl",symbol:"",repeat:!1,style:"special",icon:"keyboard_control_key"},MetaLeft:{code:"MetaLeft",type:"functional",key:"Meta",symbol:"",repeat:!1,style:"special",icon:"keyboard_command_key"},AltLeft:{code:"AltLeft",type:"functional",key:"Alt",symbol:"",repeat:!1,style:"special",icon:"keyboard_option_key"},Space:{code:"Space",type:"symbol",key:" ",repeat:!0},AltRight:{code:"AltRight",type:"functional",key:"Alt",symbol:"",repeat:!1,style:"special",icon:"keyboard_option_key"},ControlRight:{code:"ControlRight",type:"functional",key:"Ctrl",symbol:"",repeat:!1,style:"special",icon:"keyboard_control_key"},ArrowLeft:{code:"ArrowLeft",type:"functional",key:"◄",repeat:!0,style:"special"},ArrowDown:{code:"ArrowDown",type:"functional",key:"▼",repeat:!0,style:"special"},ArrowRight:{code:"ArrowRight",type:"functional",key:"►",repeat:!0,style:"special"}}},getLangs(){return Object.keys(this.options)}};class n{constructor(e){this.keyboard=e,this.isShifted=!1,this.isCapsed=!1}handleShift(e){this.isShifted=!this.isShifted,Object.values(e).forEach((e=>e.shift()))}handleCaps(e){this.isCapsed=!this.isCapsed,Object.values(e).forEach((e=>e.changeCase())),e.CapsLock.toggle("key_capslock_on")}changeLang(e,t){Object.keys(e).forEach((s=>{t[s].changeLang(e[s]),this.isCapsed&&t[s].changeCase()}))}}const r=new e({parentNode:document.body,className:"main",tag:"main"}),y=new e({parentNode:r.node,className:"components"}),c=new class extends e{constructor(e){super({tag:"textarea",className:"output",attributes:{placeholder:"Type something..."}}),this.selStart=0,this.selEnd=0,this.node.autofocus=!0,this.createContainerEl(e),this.container.append(this.node),this.node.onkeydown=e=>{e.preventDefault()}}createContainerEl(t){this.container=new e({parentNode:t,className:"output-container"})}get content(){return this.node.value}set content(e){this.node.value=e}focus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;setTimeout((()=>{this.node.focus(),this.node.setSelectionRange(e,t)}),0)}getCaretInfo(){return[this.node.selectionStart,this.node.selectionEnd]}}(y.node),l=new class extends e{constructor(e,t){super({parentNode:e,className:"keyboard"}),this.langs=a.getLangs(),this.keysConfig=a.options,this.keys={},this.value="",this.output=t}init(){this.value=this.output.content,this.getCurrentLang(),this.createKeys(),this.state=new n(this),this.addListeners()}getCurrentLang(){this.currentLang=localStorage.getItem("keyboard-lang")||this.langs[0],this.currentLangIndex=this.langs.indexOf(this.currentLang)}saveCurrentLang(){localStorage.setItem("keyboard-lang",this.currentLang)}createKeys(){const e=this.keysConfig[this.currentLang];Object.keys(e).forEach((t=>{let s;switch(t){case"ShiftLeft":case"ShiftRight":s=new o(this.node,e[t],(()=>this.handleShift()),(()=>this.handleShift()));break;case"Backspace":s=new o(this.node,e[t],(()=>this.backspace()));break;case"Delete":s=new o(this.node,e[t],(()=>this.delete()));break;case"CapsLock":s=new o(this.node,e[t],(()=>this.handleCaps()));break;case"Lang":s=new o(this.node,e[t],(()=>this.toNextLang()));break;case"ArrowUp":s=new o(this.node,e[t],(()=>this.moveCursorVertically("backward")));break;case"ArrowDown":s=new o(this.node,e[t],(()=>this.moveCursorVertically("forward")));break;case"ArrowLeft":s=new o(this.node,e[t],(()=>this.moveCursorHorizontally(-1)));break;case"ArrowRight":s=new o(this.node,e[t],(()=>this.moveCursorHorizontally(1)));break;default:s=new o(this.node,e[t],(e=>this.print(e)))}this.keys[t]=s}))}addListeners(){window.addEventListener("keydown",(e=>this.handleKeyDown(e))),window.addEventListener("keyup",(e=>this.handleKeyUp(e))),window.addEventListener("beforeunload",(()=>this.saveCurrentLang()))}handleKeyDown(e){const t=this.keys[e.code];if(t){if(e.repeat&&!t.repeat)return;t.handleDown()}("AltLeft"===e.code&&e.ctrlKey||"ControlLeft"===e.code&&e.altKey)&&this.toNextLang()}handleKeyUp(e){const t=this.keys[e.code];t&&t.handleUp()}print(e){this.updateCaretPosition();const t=this.output.content;this.value=t.substring(0,this.selStart).concat(e).concat(t.substring(this.selEnd)),this.output.content=this.value,this.output.focus(this.selStart+e.length)}backspace(){this.updateCaretPosition();const e=this.output.content;this.hasSelection&&(this.selStart=Math.max(this.selStart-1,0)),this.value=e.substring(0,this.selStart).concat(e.substring(this.selEnd)),this.output.content=this.value,this.output.focus(this.selStart)}delete(){this.updateCaretPosition();const e=this.output.content;this.hasSelection&&(this.selEnd=Math.min(this.selEnd+1,e.length)),this.value=e.substring(0,this.selStart).concat(e.substring(this.selEnd)),this.output.content=this.value,this.output.focus(this.selStart)}handleShift(){this.updateCaretPosition(),this.state.handleShift(this.keys),this.output.focus(this.selStart,this.selEnd)}handleCaps(){this.updateCaretPosition(),this.state.handleCaps(this.keys),this.output.focus(this.selStart,this.selEnd)}toNextLang(){this.updateCaretPosition(),this.currentLangIndex=(this.currentLangIndex+1)%this.langs.length,this.currentLang=this.langs[this.currentLangIndex];const e=this.keysConfig[this.currentLang];this.state.changeLang(e,this.keys),this.output.focus(this.selStart,this.selEnd)}updateCaretPosition(){[this.selStart,this.selEnd]=this.output.getCaretInfo(),this.hasSelection=this.selStart===this.selEnd}moveCursorVertically(e){this.updateCaretPosition(),window.getSelection().modify("move",e,"line"),this.updateCaretPosition(),this.output.focus(this.selStart)}moveCursorHorizontally(e){this.updateCaretPosition(),this.selStart+=e,this.selStart=Math.max(this.selStart,0),this.output.focus(this.selStart)}}(y.node,c);l.init(),y.append(i.node);var p=r,h=s(91),d=s.n(h),k=new URL(s(2),s.b),u=new URL(s(832),s.b),f='<ul class="footer-list"> <li class="footer-item footer-text">© 2023</li> <li class="footer-item"> <a class="footer-link" href="https://github.com/DeePenguin"> <img class="footer-svg" src="'+d()(k)+'" alt="GitHub Icon"> </a> </li> <li class="footer-item"> <a class="footer-link" href="https://rs.school/js/"> <img class="footer-svg" src="'+d()(u)+'" alt="Rsschool Icon"> </a> </li> </ul> ',g=new e({parentNode:document.body,className:"footer",tag:"footer",content:f});(new class{constructor(){this.node=document.body,this.node.classList.add("page")}init(){this.header=t,this.main=p,this.footer=g}}).init()}()}();